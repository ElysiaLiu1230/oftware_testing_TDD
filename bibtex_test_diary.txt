RED

Test code

import bibtex
import pytest

@pytest.fixture
def setup_data():
    return {
        'simple_author_1': "Smith",
        'simple_author_2': "Jones",
        'author_1': "John Smith",
        'author_2': "Bob Jones",
        'author_3': "Justin Kenneth Pearson",
        'surname_first_1': "Pearson, Justin Kenneth",
        'surname_first_2': "Van Hentenryck, Pascal",
        'multiple_authors_1': "Pearson, Justin and Jones, Bob"
    }

def test_author_1(setup_data):
    # Test only surnames.
    (Surname, FirstNames) = bibtex.extract_author(setup_data['simple_author_1'])
    assert (Surname, FirstNames) == ('Smith', '')

    (Surname, FirstNames) = bibtex.extract_author(setup_data['simple_author_2'])
    assert (Surname, FirstNames) == ('Jones', '')

===================================================== FAILURES ======================================================

setup_data = {'author_1': 'John Smith', 'author_2': 'Bob Jones', 'author_3': 'Justin Kenneth Pearson', 'multiple_authors_1': 'Pearson, Justin and Jones, Bob', ...}

    def test_author_1(setup_data):
        # Test only surnames.
>       (Surname, FirstNames) = bibtex.extract_author(setup_data['simple_author_1'])
E       AttributeError: module 'bibtex' has no attribute 'extract_author'

=====================================================================================================================

GREEN

Add extract_author function in bibtex.py

def extract_author(author):
    return author, ""

=====================================================================================================================
test_bibtex.py .                                                                                               [100%]

================================================= 1 passed in 0.02s =================================================

RED

add test2

def test_author_2(setup_data):
    # Test simple firstname author.
    (Surname, First) = bibtex.extract_author(setup_data['author_1'])
    assert (Surname, First) == ("Smith", "John")

    (Surname, First) = bibtex.extract_author(setup_data['author_2'])
    assert (Surname, First) == ("Jones", "Bob")

====================================================== FAILURES ======================================================

test_bibtex.py::test_author_1 PASSED                                                                           [ 50%]
test_bibtex.py::test_author_2 FAILED                                                                           [100%]

setup_data = {'author_1': 'John Smith', 'author_2': 'Bob Jones', 'author_3': 'Justin Kenneth Pearson', 'multiple_authors_1': 'Pearson, Justin and Jones, Bob', ...}

    def test_author_2(setup_data):
        # Test simple firstname author.
        (Surname, First) = bibtex.extract_author(setup_data['author_1'])
>       assert (Surname, First) == ("Smith", "John")
E       AssertionError: assert ('John Smith', '') == ('Smith', 'John')
E         At index 0 diff: 'John Smith' != 'Smith'
E         Full diff:
E         - ('Smith', 'John')
E         + ('John Smith', '')

test_bibtex.py:28: AssertionError

=====================================================================================================================

GREEN

add condition for full name

def extract_author(author):
    parts = author.split()

    if len(parts) == 2:
        first, surname = parts
        return surname, first

    return author, ""

=====================================================================================================================
collected 2 items                                                                                                     

test_bibtex.py::test_author_1 PASSED                                                                           [ 50%] 
test_bibtex.py::test_author_2 PASSED                                                                           [100%] 

================================================= 2 passed in 0.02s ================================================= 

RED

Add test_author_3 to distinguish authors with multiple first names

def test_author_3(setup_data):
    (Surname, First) = bibtex.extract_author(setup_data['author_3'])
    assert (Surname, First) == ("Pearson", "Justin Kenneth")

===================================================== FAILURES ====================================================== 

test_bibtex.py::test_author_1 PASSED                                                                           [ 33%]
test_bibtex.py::test_author_2 PASSED                                                                           [ 66%] 
test_bibtex.py::test_author_3 FAILED                                                                           [100%]

setup_data = {'author_1': 'John Smith', 'author_2': 'Bob Jones', 'author_3': 'Justin Kenneth Pearson', 'multiple_authors_1': 'Pearson, Justin and Jones, Bob', ...}

    def test_author_3(setup_data):
        (Surname, First) = bibtex.extract_author(setup_data['author_3'])
>       assert (Surname, First) == ("Pearson", "Justin Kenneth")
E       AssertionError: assert ('Justin Kenneth Pearson', '') == ('Pearson', 'Justin Kenneth')
E         At index 0 diff: 'Justin Kenneth Pearson' != 'Pearson'
E         Full diff:
E         - ('Pearson', 'Justin Kenneth')
E         + ('Justin Kenneth Pearson', '')

test_bibtex.py:35: AssertionError
=====================================================================================================================
GREEN

Add condition for multiple first names

def extract_author(author):
    parts = author.split()

    if len(parts) == 1:
        return parts[0], ""

    if len(parts) == 2:
        first, surname = parts
        return surname, first

    # len(parts) > 2
    surname = parts[-1]
    first = " ".join(parts[:-1])
    return surname, first

=====================================================================================================================
collected 3 items                                                                                                    

test_bibtex.py::test_author_1 PASSED                                                                           [ 33%]
test_bibtex.py::test_author_2 PASSED                                                                           [ 66%]
test_bibtex.py::test_author_3 PASSED                                                                           [100%]

================================================= 3 passed in 0.02s =================================================

RED

add test surname_first

def test_surname_first(setup_data):
    (Surname, First) = bibtex.extract_author(setup_data['surname_first_1'])
    assert (Surname, First) == ("Pearson", "Justin Kenneth")

    (Surname, First) = bibtex.extract_author(setup_data['surname_first_2'])
    assert (Surname, First) == ("Van Hentenryck", "Pascal")

===================================================== FAILURES ====================================================== 

test_bibtex.py::test_author_1 PASSED                                                                           [ 25%] 
test_bibtex.py::test_author_2 PASSED                                                                           [ 50%] 
test_bibtex.py::test_author_3 PASSED                                                                           [ 75%] 
test_bibtex.py::test_surname_first FAILED                                                                      [100%]

________________________________________________ test_surname_first _________________________________________________ 

setup_data = {'author_1': 'John Smith', 'author_2': 'Bob Jones', 'author_3': 'Justin Kenneth Pearson', 'multiple_authors_1': 'Pearson, Justin and Jones, Bob', ...}

    def test_surname_first(setup_data):
        (Surname, First) = bibtex.extract_author(setup_data['surname_first_1'])
>       assert (Surname, First) == ("Pearson", "Justin Kenneth")
E       AssertionError: assert ('Kenneth', 'Pearson, Justin') == ('Pearson', 'Justin Kenneth')
E         At index 0 diff: 'Kenneth' != 'Pearson'
E         Full diff:
E         - ('Pearson', 'Justin Kenneth')
E         + ('Kenneth', 'Pearson, Justin')

test_bibtex.py:39: AssertionError

======================================================================================================================

GREEN

add condition for containing ","

def extract_author(author):
    parts = author.split()

    if len(parts) == 1:
        return parts[0], ""

    if len(parts) == 2:
        first, surname = parts
        return surname, first
    
    if "," in author:
        surname, first = author.split(",", 1)
        return surname.strip(), first.strip()

    # len(parts) > 2
    surname = parts[-1]
    first = " ".join(parts[:-1])
    return surname, first

==================================================================================================================
collected 4 items                                                                                                     

test_bibtex.py::test_author_1 PASSED                                                                           [ 25%] 
test_bibtex.py::test_author_2 PASSED                                                                           [ 50%] 
test_bibtex.py::test_author_3 PASSED                                                                           [ 75%] 
test_bibtex.py::test_surname_first PASSED                                                                      [100%] 

================================================= 4 passed in 0.02s =================================================

RED

add test for multiple authors

def test_multiple_authors(setup_data):
    Authors = bibtex.extract_authors(setup_data['multiple_authors_1'])
    assert Authors[0] == ('Pearson', 'Justin')
    assert Authors[1] == ('Jones', 'Bob')

===================================================== FAILURES ====================================================== 

collected 5 items                                                                                                    

test_bibtex.py::test_author_1 PASSED                                                                           [ 20%] 
test_bibtex.py::test_author_2 PASSED                                                                           [ 40%] 
test_bibtex.py::test_author_3 PASSED                                                                           [ 60%] 
test_bibtex.py::test_surname_first PASSED                                                                      [ 80%] 
test_bibtex.py::test_multiple_authors FAILED                                                                   [100%]

setup_data = {'author_1': 'John Smith', 'author_2': 'Bob Jones', 'author_3': 'Justin Kenneth Pearson', 'multiple_authors_1': 'Pearson, Justin and Jones, Bob', ...}

    def test_multiple_authors(setup_data):
>       Authors = bibtex.extract_authors(setup_data['multiple_authors_1'])
E       AttributeError: module 'bibtex' has no attribute 'extract_authors'. Did you mean: 'extract_author'?

======================================================================================================================

GREEN

Add function to distinguish multiple authors separated by 'and'

def extract_authors(authors):
    names = authors.split(" and ")
    return [extract_author(name) for name in names]

Also, change the orders of the if statements

def extract_author(author):
    parts = author.split()

    if "," in author:
        surname, first = author.split(",", 1)
        return surname.strip(), first.strip()
    
    if len(parts) == 1:
        return parts[0], ""

    if len(parts) == 2:
        first, surname = parts
        return surname, first
    
    # len(parts) > 2
    surname = parts[-1]
    first = " ".join(parts[:-1])
    return surname, first

======================================================================================================================
collected 5 items                                                                                                     

test_bibtex.py::test_author_1 PASSED                                                                           [ 20%] 
test_bibtex.py::test_author_2 PASSED                                                                           [ 40%] 
test_bibtex.py::test_author_3 PASSED                                                                           [ 60%] 
test_bibtex.py::test_surname_first PASSED                                                                      [ 80%] 
test_bibtex.py::test_multiple_authors PASSED                                                                   [100%] 

================================================= 5 passed in 0.01s =================================================